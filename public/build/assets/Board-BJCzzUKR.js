import{c as ae,r as pe,j as s,a as De,H as Ae,L as R}from"./app-CYIsVC7V.js";import{a as Me,D as ze,b as je,c as Be,d as Ke}from"./app-layout-CZfFggbU.js";import{B as oe}from"./button-BPB2Jfja.js";import{u as Pe,a as Te,s as Re,K as Ge,P as Ve,D as He,b as Fe,c as We,d as qe,S as Je,v as Qe,e as Ue,C as Xe}from"./sortable.esm-DqbU5mSN.js";import{A as Ye}from"./arrow-left-BPQTRbkt.js";import{L as Ze}from"./list-DbwKDmxZ.js";import{P as ge}from"./plus-DrtUgN41.js";import{G as Oe}from"./grip-vertical-D3ybYBeQ.js";import{C as et}from"./graduation-cap-Jst05mH0.js";import{E as tt}from"./ellipsis-DW8dvD6H.js";/* empty css            */import"./app-logo-icon-x5JIfJM4.js";function st(u){return u?new Date(u).toLocaleDateString("id-ID",{day:"numeric",month:"short"}):""}function lt(u,e){return!u||e?!1:new Date(u)<new Date}function Ee(u){const e=ae.c(22),{task:t,isCompleted:l}=u;let i;e[0]!==l||e[1]!==t.due_date?(i=lt(t.due_date,l),e[0]=l,e[1]=t.due_date,e[2]=i):i=e[2];const a=i,n=`text-sm font-medium ${l?"line-through text-muted-foreground":""}`;let h;e[3]!==n||e[4]!==t.title?(h=s.jsx("p",{className:n,children:t.title}),e[3]=n,e[4]=t.title,e[5]=h):h=e[5];let c;e[6]!==t.description?(c=t.description&&s.jsx("p",{className:"mt-1 text-xs text-muted-foreground line-clamp-2",children:t.description}),e[6]=t.description,e[7]=c):c=e[7];let f;e[8]!==t.priority?(f=t.priority&&s.jsx("span",{className:"inline-flex h-5 items-center rounded px-1.5 text-[10px] font-medium",style:{backgroundColor:`${t.priority.color}20`,color:t.priority.color},children:t.priority.name}),e[8]=t.priority,e[9]=f):f=e[9];let d;e[10]!==f?(d=s.jsx("div",{className:"flex items-center gap-2",children:f}),e[10]=f,e[11]=d):d=e[11];let m;e[12]!==a||e[13]!==t.due_date?(m=t.due_date&&s.jsxs("span",{className:`inline-flex items-center gap-1 text-[10px] ${a?"text-red-500":"text-muted-foreground"}`,children:[s.jsx(et,{className:"h-3 w-3"}),st(t.due_date)]}),e[12]=a,e[13]=t.due_date,e[14]=m):m=e[14];let r;e[15]!==d||e[16]!==m?(r=s.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[d,m]}),e[15]=d,e[16]=m,e[17]=r):r=e[17];let v;return e[18]!==h||e[19]!==c||e[20]!==r?(v=s.jsxs(s.Fragment,{children:[h,c,r]}),e[18]=h,e[19]=c,e[20]=r,e[21]=v):v=e[21],v}function rt(u){const e=ae.c(43),{task:t,isCompleted:l}=u;let i;e[0]!==t.id?(i=t.id.toString(),e[0]=t.id,e[1]=i):i=e[1];let a;e[2]!==i?(a={id:i},e[2]=i,e[3]=a):a=e[3];const{attributes:n,listeners:h,setNodeRef:c,transform:f,transition:d,isDragging:m}=Ue(a);let r;e[4]!==f?(r=Xe.Transform.toString(f),e[4]=f,e[5]=r):r=e[5];const v=m?.5:1;let T;e[6]!==r||e[7]!==v||e[8]!==d?(T={transform:r,transition:d,opacity:v},e[6]=r,e[7]=v,e[8]=d,e[9]=T):T=e[9];const L=T,$=`group rounded-lg border bg-card p-3 shadow-sm transition-all hover:shadow-md ${m?"ring-2 ring-primary":""}`;let I;e[10]===Symbol.for("react.memo_cache_sentinel")?(I=s.jsx(Oe,{className:"h-4 w-4 text-muted-foreground/50 opacity-0 group-hover:opacity-100"}),e[10]=I):I=e[10];let j;e[11]!==n||e[12]!==h?(j=s.jsx("div",{...n,...h,className:"mt-0.5 cursor-grab touch-none active:cursor-grabbing",children:I}),e[11]=n,e[12]=h,e[13]=j):j=e[13];let _;e[14]!==l||e[15]!==t?(_=s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(Ee,{task:t,isCompleted:l})}),e[14]=l,e[15]=t,e[16]=_):_=e[16];let A;e[17]===Symbol.for("react.memo_cache_sentinel")?(A=s.jsx(ze,{asChild:!0,children:s.jsx(oe,{variant:"ghost",size:"icon",className:"h-6 w-6 opacity-0 group-hover:opacity-100",children:s.jsx(tt,{className:"h-3 w-3"})})}),e[17]=A):A=e[17];const y=`/opus/tasks/${t.id}`;let b;e[18]!==y?(b=s.jsx(je,{asChild:!0,children:s.jsx(R,{href:y,children:"View Details"})}),e[18]=y,e[19]=b):b=e[19];const k=`/opus/tasks/${t.id}/edit`;let o;e[20]!==k?(o=s.jsx(je,{asChild:!0,children:s.jsx(R,{href:k,children:"Edit"})}),e[20]=k,e[21]=o):o=e[21];let w;e[22]!==t.id?(w=()=>{De.patch(`/opus/tasks/${t.id}/toggle-complete`)},e[22]=t.id,e[23]=w):w=e[23];const S=l?"Mark as Incomplete":"Mark as Complete";let g;e[24]!==w||e[25]!==S?(g=s.jsx(je,{onClick:w,children:S}),e[24]=w,e[25]=S,e[26]=g):g=e[26];let C;e[27]!==t.id?(C=s.jsx(je,{className:"text-destructive",onClick:()=>{confirm("Are you sure you want to delete this task?")&&De.delete(`/opus/tasks/${t.id}`)},children:"Delete"}),e[27]=t.id,e[28]=C):C=e[28];let N;e[29]!==b||e[30]!==o||e[31]!==g||e[32]!==C?(N=s.jsxs(Be,{children:[A,s.jsxs(Ke,{align:"end",children:[b,o,g,C]})]}),e[29]=b,e[30]=o,e[31]=g,e[32]=C,e[33]=N):N=e[33];let O;e[34]!==N||e[35]!==j||e[36]!==_?(O=s.jsxs("div",{className:"flex items-start gap-2",children:[j,_,N]}),e[34]=N,e[35]=j,e[36]=_,e[37]=O):O=e[37];let B;return e[38]!==c||e[39]!==L||e[40]!==O||e[41]!==$?(B=s.jsx("div",{ref:c,style:L,className:$,children:O}),e[38]=c,e[39]=L,e[40]=O,e[41]=$,e[42]=B):B=e[42],B}function it(u){const e=ae.c(4),{task:t,isCompleted:l}=u;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(Oe,{className:"mt-0.5 h-4 w-4 text-muted-foreground/50"}),e[0]=i):i=e[0];let a;return e[1]!==l||e[2]!==t?(a=s.jsx("div",{className:"w-80 rounded-lg border bg-card p-3 shadow-lg ring-2 ring-primary",children:s.jsxs("div",{className:"flex items-start gap-2",children:[i,s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx(Ee,{task:t,isCompleted:l})})]})}),e[1]=l,e[2]=t,e[3]=a):a=e[3],a}function ot(u){const e=ae.c(49),{column:t,tasks:l,projectId:i}=u,a=`column-${t.id}`;let n;e[0]!==t.id?(n={type:"column",statusId:t.id},e[0]=t.id,e[1]=n):n=e[1];let h;e[2]!==a||e[3]!==n?(h={id:a,data:n},e[2]=a,e[3]=n,e[4]=h):h=e[4];const{setNodeRef:c,isOver:f}=qe(h);let d;e[5]!==t.color?(d=s.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:t.color}}),e[5]=t.color,e[6]=d):d=e[6];let m;e[7]!==t.name?(m=s.jsx("h3",{className:"font-semibold",children:t.name}),e[7]=t.name,e[8]=m):m=e[8];let r;e[9]!==l.length?(r=s.jsx("span",{className:"rounded-full bg-muted px-2 py-0.5 text-xs text-muted-foreground",children:l.length}),e[9]=l.length,e[10]=r):r=e[10];let v;e[11]!==d||e[12]!==m||e[13]!==r?(v=s.jsxs("div",{className:"flex items-center gap-2",children:[d,m,r]}),e[11]=d,e[12]=m,e[13]=r,e[14]=v):v=e[14];const T=`/opus/projects/${i}/tasks/create`;let L;e[15]===Symbol.for("react.memo_cache_sentinel")?(L=s.jsx(oe,{variant:"ghost",size:"icon",className:"h-7 w-7",children:s.jsx(ge,{className:"h-4 w-4"})}),e[15]=L):L=e[15];let $;e[16]!==T?($=s.jsx(R,{href:T,children:L}),e[16]=T,e[17]=$):$=e[17];let I;e[18]!==$||e[19]!==v?(I=s.jsxs("div",{className:"flex items-center justify-between p-3 pb-2",children:[v,$]}),e[18]=$,e[19]=v,e[20]=I):I=e[20];let j;e[21]!==l?(j=l.map(at),e[21]=l,e[22]=j):j=e[22];const _=`flex-1 space-y-2 overflow-y-auto p-3 pt-1 transition-colors ${f?"bg-primary/10":""}`,A=t.id;let y;if(e[23]!==t.is_completed||e[24]!==i||e[25]!==l){let N;e[27]!==t.is_completed||e[28]!==i?(N=O=>s.jsx(rt,{task:O,isCompleted:t.is_completed,projectId:i},O.id),e[27]=t.is_completed,e[28]=i,e[29]=N):N=e[29],y=l.map(N),e[23]=t.is_completed,e[24]=i,e[25]=l,e[26]=y}else y=e[26];let b;e[30]!==f||e[31]!==l.length?(b=l.length===0&&s.jsx("div",{className:`flex h-32 items-center justify-center rounded-lg border-2 border-dashed text-sm text-muted-foreground transition-colors ${f?"border-primary bg-primary/5":"border-muted-foreground/20"}`,children:"Drop tasks here"}),e[30]=f,e[31]=l.length,e[32]=b):b=e[32];let k;e[33]!==t.id||e[34]!==c||e[35]!==_||e[36]!==y||e[37]!==b?(k=s.jsxs("div",{ref:c,className:_,"data-status-id":A,children:[y,b]}),e[33]=t.id,e[34]=c,e[35]=_,e[36]=y,e[37]=b,e[38]=k):k=e[38];let o;e[39]!==j||e[40]!==k?(o=s.jsx(Je,{items:j,strategy:Qe,children:k}),e[39]=j,e[40]=k,e[41]=o):o=e[41];const w=`/opus/projects/${i}/tasks/create`;let S;e[42]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsxs("button",{className:"w-full rounded-lg border-2 border-dashed border-muted-foreground/20 p-3 text-sm text-muted-foreground transition-colors hover:border-muted-foreground/40 hover:bg-muted/50",children:[s.jsx(ge,{className:"mr-1 inline h-4 w-4"}),"Add task"]}),e[42]=S):S=e[42];let g;e[43]!==w?(g=s.jsx("div",{className:"p-3 pt-1",children:s.jsx(R,{href:w,children:S})}),e[43]=w,e[44]=g):g=e[44];let C;return e[45]!==I||e[46]!==o||e[47]!==g?(C=s.jsxs("div",{className:"flex h-full w-80 flex-shrink-0 flex-col rounded-xl bg-muted/30",children:[I,o,g]}),e[45]=I,e[46]=o,e[47]=g,e[48]=C):C=e[48],C}function at(u){return u.id.toString()}function Nt(u){const e=ae.c(94),{project:t,board:l}=u;let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i={title:"Opus",href:"/opus/workspaces"},e[0]=i):i=e[0];const a=`/opus/projects/${t.id}`;let n;e[1]!==t.name||e[2]!==a?(n={title:t.name,href:a},e[1]=t.name,e[2]=a,e[3]=n):n=e[3];const h=`/opus/projects/${t.id}/board`;let c;e[4]!==h?(c={title:"Board",href:h},e[4]=h,e[5]=c):c=e[5];let f;e[6]!==n||e[7]!==c?(f=[i,n,c],e[6]=n,e[7]=c,e[8]=f):f=e[8];const d=f;let m;e[9]!==l.data?(m=()=>{const x={};return l.data.forEach(p=>{x[p.id]=(p.tasks??[]).map(D=>({...D,status_id:p.id}))}),x},e[9]=l.data,e[10]=m):m=e[10];const[r,v]=pe.useState(m),[T,L]=pe.useState(null),[$,I]=pe.useState(!1),[j,_]=pe.useState(null);let A;e[11]===Symbol.for("react.memo_cache_sentinel")?(A={activationConstraint:{distance:8}},e[11]=A):A=e[11];let y;e[12]===Symbol.for("react.memo_cache_sentinel")?(y={coordinateGetter:Re},e[12]=y):y=e[12];const b=Pe(Te(Ve,A),Te(Ge,y));let k;e[13]!==r?(k=x=>{for(const[p,D]of Object.entries(r))if(D.some(E=>E.id.toString()===x))return parseInt(p);return null},e[13]=r,e[14]=k):k=e[14];const o=k;let w;e[15]!==r?(w=x=>{for(const p of Object.values(r)){const D=p.find(E=>E.id.toString()===x);if(D)return D}return null},e[15]=r,e[16]=w):w=e[16];const S=w;let g;e[17]!==l.data?(g=x=>l.data.find(D=>D.id===x)?.is_completed??!1,e[17]=l.data,e[18]=g):g=e[18];const C=g;let N;e[19]!==o||e[20]!==S||e[21]!==C?(N=x=>{const{active:p}=x,D=S(p.id),E=o(p.id);L(D),_(E),I(E?C(E):!1)},e[19]=o,e[20]=S,e[21]=C,e[22]=N):N=e[22];const O=N;let B;e[23]!==r||e[24]!==o?(B=x=>{const{active:p,over:D}=x;if(!D)return;const E=p.id,K=D.id,P=o(E);let z=o(K);if(!z&&K.startsWith("column-")){const M=parseInt(K.replace("column-",""));!isNaN(M)&&r[M]!==void 0&&(z=M)}if(!z){const M=parseInt(K);!isNaN(M)&&r[M]&&(z=M)}!P||!z||P===z||v(M=>{const Se=[...M[P]],xe=[...M[z]],Le=Se.findIndex(Ce=>Ce.id.toString()===E),[$e]=Se.splice(Le,1),Ie=xe.findIndex(Ce=>Ce.id.toString()===K);return Ie>=0?xe.splice(Ie,0,{...$e,status_id:z}):xe.push({...$e,status_id:z}),{...M,[P]:Se,[z]:xe}})},e[23]=r,e[24]=o,e[25]=B):B=e[25];const ve=B;let ne;e[26]!==o||e[27]!==S||e[28]!==j?(ne=x=>{const{active:p,over:D}=x;if(L(null),I(!1),!D){_(null);return}const E=p.id,K=S(E),P=o(E);if(!K||!P){_(null);return}j!==null&&j!==P&&De.patch(`/opus/tasks/${K.id}/status`,{status_id:P},{preserveScroll:!0,preserveState:!1}),_(null)},e[26]=o,e[27]=S,e[28]=j,e[29]=ne):ne=e[29];const be=ne;let ce;e[30]!==r?(ce=Object.values(r).reduce(nt,0),e[30]=r,e[31]=ce):ce=e[31];const Ne=ce,_e=`Board - ${t.name}`;let G;e[32]!==_e?(G=s.jsx(Ae,{title:_e}),e[32]=_e,e[33]=G):G=e[33];const ye=`/opus/projects/${t.id}`;let de;e[34]===Symbol.for("react.memo_cache_sentinel")?(de=s.jsx(oe,{variant:"ghost",size:"icon",children:s.jsx(Ye,{className:"h-5 w-5"})}),e[34]=de):de=e[34];let V;e[35]!==ye?(V=s.jsx(R,{href:ye,children:de}),e[35]=ye,e[36]=V):V=e[36];let H;e[37]!==t.name?(H=s.jsx("h1",{className:"text-xl font-bold",children:t.name}),e[37]=t.name,e[38]=H):H=e[38];let F;e[39]!==t.status?(F=t.status&&s.jsx("span",{className:"rounded-full px-2 py-0.5 text-xs text-white",style:{backgroundColor:t.status.color},children:t.status.name}),e[39]=t.status,e[40]=F):F=e[40];let W;e[41]!==H||e[42]!==F?(W=s.jsxs("div",{className:"flex items-center gap-3",children:[H,F]}),e[41]=H,e[42]=F,e[43]=W):W=e[43];let q;e[44]!==l.data.length||e[45]!==Ne?(q=s.jsxs("p",{className:"text-sm text-muted-foreground",children:[Ne," tasks across ",l.data.length," columns"]}),e[44]=l.data.length,e[45]=Ne,e[46]=q):q=e[46];let J;e[47]!==W||e[48]!==q?(J=s.jsxs("div",{children:[W,q]}),e[47]=W,e[48]=q,e[49]=J):J=e[49];let Q;e[50]!==V||e[51]!==J?(Q=s.jsxs("div",{className:"flex items-center gap-4",children:[V,J]}),e[50]=V,e[51]=J,e[52]=Q):Q=e[52];const ke=`/opus/projects/${t.id}`;let me;e[53]===Symbol.for("react.memo_cache_sentinel")?(me=s.jsxs(oe,{variant:"outline",size:"sm",children:[s.jsx(Ze,{className:"mr-2 h-4 w-4"}),"List View"]}),e[53]=me):me=e[53];let U;e[54]!==ke?(U=s.jsx(R,{href:ke,children:me}),e[54]=ke,e[55]=U):U=e[55];const we=`/opus/projects/${t.id}/tasks/create`;let fe;e[56]===Symbol.for("react.memo_cache_sentinel")?(fe=s.jsxs(oe,{size:"sm",children:[s.jsx(ge,{className:"mr-2 h-4 w-4"}),"New Task"]}),e[56]=fe):fe=e[56];let X;e[57]!==we?(X=s.jsx(R,{href:we,children:fe}),e[57]=we,e[58]=X):X=e[58];let Y;e[59]!==U||e[60]!==X?(Y=s.jsxs("div",{className:"flex gap-2",children:[U,X]}),e[59]=U,e[60]=X,e[61]=Y):Y=e[61];let Z;e[62]!==Q||e[63]!==Y?(Z=s.jsxs("div",{className:"flex items-center justify-between border-b px-4 py-3",children:[Q,Y]}),e[62]=Q,e[63]=Y,e[64]=Z):Z=e[64];let ee;if(e[65]!==l.data||e[66]!==r||e[67]!==t.id){let x;e[69]!==r||e[70]!==t.id?(x=p=>s.jsx(ot,{column:p,tasks:r[p.id]||[],projectId:t.id},p.id),e[69]=r,e[70]=t.id,e[71]=x):x=e[71],ee=l.data.map(x),e[65]=l.data,e[66]=r,e[67]=t.id,e[68]=ee}else ee=e[68];let ue;e[72]===Symbol.for("react.memo_cache_sentinel")?(ue=s.jsx("div",{className:"flex h-full w-80 flex-shrink-0 items-start",children:s.jsx(R,{href:"/settings/opus",className:"w-full",children:s.jsxs("button",{className:"w-full rounded-xl border-2 border-dashed border-muted-foreground/20 p-4 text-sm text-muted-foreground transition-colors hover:border-muted-foreground/40 hover:bg-muted/30",children:[s.jsx(ge,{className:"mr-1 inline h-4 w-4"}),"Manage Columns"]})})}),e[72]=ue):ue=e[72];let te;e[73]!==ee?(te=s.jsx("div",{className:"flex-1 overflow-x-auto p-4",children:s.jsxs("div",{className:"flex h-full gap-4",children:[ee,ue]})}),e[73]=ee,e[74]=te):te=e[74];let se;e[75]!==$||e[76]!==T?(se=T?s.jsx(it,{task:T,isCompleted:$}):null,e[75]=$,e[76]=T,e[77]=se):se=e[77];let le;e[78]!==se?(le=s.jsx(He,{children:se}),e[78]=se,e[79]=le):le=e[79];let re;e[80]!==be||e[81]!==ve||e[82]!==O||e[83]!==b||e[84]!==te||e[85]!==le?(re=s.jsxs(Fe,{sensors:b,collisionDetection:We,onDragStart:O,onDragOver:ve,onDragEnd:be,children:[te,le]}),e[80]=be,e[81]=ve,e[82]=O,e[83]=b,e[84]=te,e[85]=le,e[86]=re):re=e[86];let ie;e[87]!==Z||e[88]!==re?(ie=s.jsxs("div",{className:"flex h-full flex-col",children:[Z,re]}),e[87]=Z,e[88]=re,e[89]=ie):ie=e[89];let he;return e[90]!==d||e[91]!==G||e[92]!==ie?(he=s.jsxs(Me,{breadcrumbs:d,children:[G,ie]}),e[90]=d,e[91]=G,e[92]=ie,e[93]=he):he=e[93],he}function nt(u,e){return u+e.length}export{Nt as default};
