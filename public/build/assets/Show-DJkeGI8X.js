import{c as me,j as t,H as Re,L as Te,a as qe}from"./app-BZn2Y_Rz.js";import{M as He,a as ze,D as Je,b as Me,f as Ve,c as Ge,d as Ke}from"./app-layout-Bs9Ih2Sn.js";import{B as Ee}from"./button-VzMRwoWK.js";import{C as Pe}from"./circle-check-BwvuzAK5.js";import{R as Qe}from"./rotate-ccw-vJy7_XOj.js";import{c as We,C as Xe}from"./graduation-cap-Bl6zL9C8.js";import{A as Ye}from"./arrow-left-BTeP98uM.js";import{S as Ie}from"./square-pen-m8ESW-9f.js";import{T as Ze}from"./trash-2-Cu0UFMGO.js";import{F as Ue}from"./flag-BJddmYe6.js";import{C as et}from"./clock-BbDyq_g-.js";import{T as tt}from"./tag-BneRKVLO.js";import{E as st}from"./external-link-B8IKtLAa.js";import{U as lt}from"./user-Y79ebLkk.js";/* empty css            */import"./app-logo-icon-GpKUnOHy.js";const rt=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],at=We("paperclip",rt);function it(l){return l?new Date(l).toLocaleDateString("id-ID",{weekday:"long",day:"numeric",month:"long",year:"numeric"}):"-"}function Oe(l){return new Date(l).toLocaleDateString("id-ID",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})}function ct(l){return l?new Date(l)<new Date:!1}function nt(l){if(!l)return null;const e=new Date(l),s=new Date;return Math.ceil((e.getTime()-s.getTime())/(1e3*60*60*24))}function ot(l){if(!l)return null;try{return JSON.parse(l)}catch{return null}}function dt(l){const e=me.c(8),{item:s}=l;let a;e[0]!==s.done?(a=t.jsx("input",{type:"checkbox",checked:s.done,readOnly:!0,className:"h-4 w-4 rounded border-muted-foreground/50"}),e[0]=s.done,e[1]=a):a=e[1];const i=s.done?"line-through text-muted-foreground":"";let r;e[2]!==s.text||e[3]!==i?(r=t.jsx("span",{className:i,children:s.text}),e[2]=s.text,e[3]=i,e[4]=r):r=e[4];let c;return e[5]!==a||e[6]!==r?(c=t.jsxs("label",{className:"flex cursor-pointer items-center gap-3 rounded-lg p-2 transition-colors hover:bg-muted",children:[a,r]}),e[5]=a,e[6]=r,e[7]=c):c=e[7],c}function mt(l){const e=me.c(8),{status:s}=l;let a;e[0]!==s.color?(a={backgroundColor:s.color},e[0]=s.color,e[1]=a):a=e[1];let i;e[2]!==s.is_completed?(i=s.is_completed&&t.jsx(Pe,{className:"h-4 w-4"}),e[2]=s.is_completed,e[3]=i):i=e[3];let r;return e[4]!==s.name||e[5]!==a||e[6]!==i?(r=t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium text-white",style:a,children:[i,s.name]}),e[4]=s.name,e[5]=a,e[6]=i,e[7]=r):r=e[7],r}function ut(l){const e=me.c(7),{priority:s}=l,a=`${s.color}20`;let i;e[0]!==s.color||e[1]!==a?(i={backgroundColor:a,color:s.color},e[0]=s.color,e[1]=a,e[2]=i):i=e[2];let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsx(Ue,{className:"h-4 w-4"}),e[3]=r):r=e[3];let c;return e[4]!==s.name||e[5]!==i?(c=t.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full px-3 py-1 text-sm font-medium",style:i,children:[r,s.name]}),e[4]=s.name,e[5]=i,e[6]=c):c=e[6],c}function At(l){const e=me.c(144),{task:s}=l;let a,i,r,c,m,u,f,o,x,d,h;if(e[0]!==s.description||e[1]!==s.due_date||e[2]!==s.id||e[3]!==s.meta||e[4]!==s.priority||e[5]!==s.project?.name||e[6]!==s.project_id||e[7]!==s.status||e[8]!==s.title){const n=ot(s.meta),Le=!s.status?.is_completed&&ct(s.due_date),P=nt(s.due_date);let le;e[20]===Symbol.for("react.memo_cache_sentinel")?(le={title:"Opus",href:"/opus/workspaces"},e[20]=le):le=e[20];const ge=s.project?.name??"Project",Ne=`/opus/projects/${s.project_id}`;let L;e[21]!==ge||e[22]!==Ne?(L={title:ge,href:Ne},e[21]=ge,e[22]=Ne,e[23]=L):L=e[23];const be=`/opus/tasks/${s.id}`;let A;e[24]!==be||e[25]!==s.title?(A={title:s.title,href:be},e[24]=be,e[25]=s.title,e[26]=A):A=e[26];let re;e[27]!==L||e[28]!==A?(re=[le,L,A],e[27]=L,e[28]=A,e[29]=re):re=e[29];const Be=re,_e=n?.checklist?.length??0,Ae=n?.checklist?.filter(jt).length??0,Fe=_e>0?Math.round(Ae/_e*100):0;a=ze,h=Be;const ye=`${s.title} - Opus`;e[30]!==ye?(r=t.jsx(Re,{title:ye}),e[30]=ye,e[31]=r):r=e[31],x="flex h-full flex-1 flex-col gap-6 p-6";const ve=`/opus/projects/${s.project_id}`;let ae;e[32]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(Ee,{variant:"ghost",size:"icon",children:t.jsx(Ye,{className:"h-5 w-5"})}),e[32]=ae):ae=e[32];let E;e[33]!==ve?(E=t.jsx(Te,{href:ve,children:ae}),e[33]=ve,e[34]=E):E=e[34];let I;e[35]!==s.status?.color||e[36]!==s.status?.is_completed?(I=s.status?.is_completed?t.jsx(Pe,{className:"h-6 w-6 text-green-500"}):t.jsx("div",{className:"h-6 w-6 rounded-full border-2",style:{borderColor:s.status?.color??"#64748b"}}),e[35]=s.status?.color,e[36]=s.status?.is_completed,e[37]=I):I=e[37];const we=`text-2xl font-bold ${s.status?.is_completed?"line-through text-muted-foreground":""}`;let O;e[38]!==we||e[39]!==s.title?(O=t.jsx("h1",{className:we,children:s.title}),e[38]=we,e[39]=s.title,e[40]=O):O=e[40];let U;e[41]!==I||e[42]!==O?(U=t.jsxs("div",{className:"flex items-center gap-3",children:[I,O]}),e[41]=I,e[42]=O,e[43]=U):U=e[43];let B;e[44]!==s.status?(B=s.status&&t.jsx(mt,{status:s.status}),e[44]=s.status,e[45]=B):B=e[45];let F;e[46]!==s.priority?(F=s.priority&&t.jsx(ut,{priority:s.priority}),e[46]=s.priority,e[47]=F):F=e[47];let R;e[48]!==B||e[49]!==F?(R=t.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3",children:[B,F]}),e[48]=B,e[49]=F,e[50]=R):R=e[50];let q;e[51]!==U||e[52]!==R?(q=t.jsxs("div",{children:[U,R]}),e[51]=U,e[52]=R,e[53]=q):q=e[53];let H;e[54]!==E||e[55]!==q?(H=t.jsxs("div",{className:"flex items-start gap-4",children:[E,q]}),e[54]=E,e[55]=q,e[56]=H):H=e[56];let ie;e[57]===Symbol.for("react.memo_cache_sentinel")?(ie=t.jsx(Je,{asChild:!0,children:t.jsx(Ee,{variant:"outline",children:"Actions"})}),e[57]=ie):ie=e[57];const ke=`/opus/tasks/${s.id}/edit`;let ce;e[58]===Symbol.for("react.memo_cache_sentinel")?(ce=t.jsx(Ie,{className:"mr-2 h-4 w-4"}),e[58]=ce):ce=e[58];let z;e[59]!==ke?(z=t.jsx(Me,{asChild:!0,children:t.jsxs(Te,{href:ke,children:[ce,"Edit Task"]})}),e[59]=ke,e[60]=z):z=e[60];let J;e[61]!==s.id?(J=()=>qe.patch(`/opus/tasks/${s.id}/toggle-complete`),e[61]=s.id,e[62]=J):J=e[62];let V;e[63]!==s.status?.is_completed?(V=s.status?.is_completed?t.jsxs(t.Fragment,{children:[t.jsx(Qe,{className:"mr-2 h-4 w-4"}),"Mark as Pending"]}):t.jsxs(t.Fragment,{children:[t.jsx(Pe,{className:"mr-2 h-4 w-4"}),"Mark as Complete"]}),e[63]=s.status?.is_completed,e[64]=V):V=e[64];let G;e[65]!==J||e[66]!==V?(G=t.jsx(Me,{onClick:J,children:V}),e[65]=J,e[66]=V,e[67]=G):G=e[67];let ne;e[68]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(Ve,{}),e[68]=ne):ne=e[68];let oe;e[69]===Symbol.for("react.memo_cache_sentinel")?(oe=t.jsxs(Me,{className:"text-destructive",children:[t.jsx(Ze,{className:"mr-2 h-4 w-4"}),"Delete Task"]}),e[69]=oe):oe=e[69];let K;e[70]!==z||e[71]!==G?(K=t.jsxs(Ge,{children:[ie,t.jsxs(Ke,{align:"end",children:[z,G,ne,oe]})]}),e[70]=z,e[71]=G,e[72]=K):K=e[72],e[73]!==H||e[74]!==K?(d=t.jsxs("div",{className:"flex items-start justify-between",children:[H,K]}),e[73]=H,e[74]=K,e[75]=d):d=e[75],f="grid gap-6 lg:grid-cols-3";let de;e[76]===Symbol.for("react.memo_cache_sentinel")?(de=t.jsx("h2",{className:"font-semibold",children:"Description"}),e[76]=de):de=e[76];let Q;e[77]!==s.description?(Q=t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[de,s.description?t.jsx("p",{className:"mt-3 whitespace-pre-wrap text-muted-foreground",children:s.description}):t.jsx("p",{className:"mt-3 italic text-muted-foreground",children:"No description provided"})]}),e[77]=s.description,e[78]=Q):Q=e[78];const De=n?.checklist&&n.checklist.length>0&&t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h2",{className:"font-semibold",children:"Checklist"}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:[Ae,"/",_e," completed"]})]}),t.jsx("div",{className:"mt-3",children:t.jsx("div",{className:"h-2 rounded-full bg-muted",children:t.jsx("div",{className:"h-full rounded-full bg-green-500 transition-all",style:{width:`${Fe}%`}})})}),t.jsx("div",{className:"mt-4 space-y-1",children:n.checklist.map(pt)})]}),Se=n?.tags&&n.tags.length>0&&t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[t.jsx("h2",{className:"font-semibold",children:"Tags"}),t.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.tags.map(ht)})]}),Ce=n?.attachments&&n.attachments.length>0&&t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[t.jsx("h2",{className:"font-semibold",children:"Attachments"}),t.jsx("div",{className:"mt-3 space-y-2",children:n.attachments.map(xt)})]}),$e=n?.comments&&n.comments.length>0&&t.jsxs("div",{className:"rounded-lg border bg-card p-6",children:[t.jsxs("h2",{className:"flex items-center gap-2 font-semibold",children:[t.jsx(He,{className:"h-4 w-4"}),"Comments (",n.comments.length,")"]}),t.jsx("div",{className:"mt-4 space-y-4",children:n.comments.map(ft)})]});e[79]!==Q||e[80]!==De||e[81]!==Se||e[82]!==Ce||e[83]!==$e?(o=t.jsxs("div",{className:"space-y-6 lg:col-span-2",children:[Q,De,Se,Ce,$e]}),e[79]=Q,e[80]=De,e[81]=Se,e[82]=Ce,e[83]=$e,e[84]=o):o=e[84],u="space-y-4",i="rounded-lg border bg-card p-4",e[85]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),e[85]=c):c=e[85],m=s.due_date?t.jsxs("div",{className:"mt-2",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Xe,{className:"h-4 w-4"}),t.jsx("span",{className:"font-medium",children:it(s.due_date)})]}),!s.status?.is_completed&&P!==null&&t.jsx("p",{className:`mt-1 text-sm ${Le?"text-red-600":P<=3?"text-amber-600":"text-muted-foreground"}`,children:Le?`${Math.abs(P)} days overdue`:P===0?"Due today":P===1?"Due tomorrow":`${P} days left`})]}):t.jsx("p",{className:"mt-2 text-muted-foreground",children:"No due date set"}),e[0]=s.description,e[1]=s.due_date,e[2]=s.id,e[3]=s.meta,e[4]=s.priority,e[5]=s.project?.name,e[6]=s.project_id,e[7]=s.status,e[8]=s.title,e[9]=a,e[10]=i,e[11]=r,e[12]=c,e[13]=m,e[14]=u,e[15]=f,e[16]=o,e[17]=x,e[18]=d,e[19]=h}else a=e[9],i=e[10],r=e[11],c=e[12],m=e[13],u=e[14],f=e[15],o=e[16],x=e[17],d=e[18],h=e[19];let p;e[86]!==i||e[87]!==c||e[88]!==m?(p=t.jsxs("div",{className:i,children:[c,m]}),e[86]=i,e[87]=c,e[88]=m,e[89]=p):p=e[89];let W;e[90]===Symbol.for("react.memo_cache_sentinel")?(W=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Status"}),e[90]=W):W=e[90];const ue=s.status?.color;let j;e[91]!==ue?(j=t.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:ue}}),e[91]=ue,e[92]=j):j=e[92];const fe=s.status?.name??"-";let g;e[93]!==fe?(g=t.jsx("span",{className:"font-medium",children:fe}),e[93]=fe,e[94]=g):g=e[94];let N;e[95]!==j||e[96]!==g?(N=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[W,t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[j,g]})]}),e[95]=j,e[96]=g,e[97]=N):N=e[97];let X;e[98]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Priority"}),e[98]=X):X=e[98];const xe=s.priority?.color;let b;e[99]!==xe?(b=t.jsx(Ue,{className:"h-4 w-4",style:{color:xe}}),e[99]=xe,e[100]=b):b=e[100];const he=s.priority?.name??"-";let _;e[101]!==he?(_=t.jsx("span",{className:"font-medium",children:he}),e[101]=he,e[102]=_):_=e[102];let y;e[103]!==b||e[104]!==_?(y=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[X,t.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[b,_]})]}),e[103]=b,e[104]=_,e[105]=y):y=e[105];let Y;e[106]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Project"}),e[106]=Y):Y=e[106];const pe=`/opus/projects/${s.project_id}`,je=s.project?.name??"View Project";let v;e[107]!==pe||e[108]!==je?(v=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[Y,t.jsx(Te,{href:pe,className:"mt-2 flex items-center gap-2 text-primary hover:underline",children:je})]}),e[107]=pe,e[108]=je,e[109]=v):v=e[109];let Z;e[110]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Activity"}),e[110]=Z):Z=e[110];let ee;e[111]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(et,{className:"h-4 w-4"}),e[111]=ee):ee=e[111];let w;e[112]!==s.created_at?(w=Oe(s.created_at),e[112]=s.created_at,e[113]=w):w=e[113];let k;e[114]!==w?(k=t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[ee,t.jsxs("span",{children:["Created ",w]})]}),e[114]=w,e[115]=k):k=e[115];let te;e[116]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsx(Ie,{className:"h-4 w-4"}),e[116]=te):te=e[116];let D;e[117]!==s.updated_at?(D=Oe(s.updated_at),e[117]=s.updated_at,e[118]=D):D=e[118];let S;e[119]!==D?(S=t.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[te,t.jsxs("span",{children:["Updated ",D]})]}),e[119]=D,e[120]=S):S=e[120];let C;e[121]!==k||e[122]!==S?(C=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[Z,t.jsxs("div",{className:"mt-2 space-y-2 text-sm",children:[k,S]})]}),e[121]=k,e[122]=S,e[123]=C):C=e[123];let $;e[124]!==p||e[125]!==N||e[126]!==y||e[127]!==v||e[128]!==C||e[129]!==u?($=t.jsxs("div",{className:u,children:[p,N,y,v,C]}),e[124]=p,e[125]=N,e[126]=y,e[127]=v,e[128]=C,e[129]=u,e[130]=$):$=e[130];let T;e[131]!==$||e[132]!==f||e[133]!==o?(T=t.jsxs("div",{className:f,children:[o,$]}),e[131]=$,e[132]=f,e[133]=o,e[134]=T):T=e[134];let M;e[135]!==T||e[136]!==x||e[137]!==d?(M=t.jsxs("div",{className:x,children:[d,T]}),e[135]=T,e[136]=x,e[137]=d,e[138]=M):M=e[138];let se;return e[139]!==a||e[140]!==r||e[141]!==M||e[142]!==h?(se=t.jsxs(a,{breadcrumbs:h,children:[r,M]}),e[139]=a,e[140]=r,e[141]=M,e[142]=h,e[143]=se):se=e[143],se}function ft(l,e){return t.jsxs("div",{className:"flex gap-3",children:[t.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10",children:t.jsx(lt,{className:"h-4 w-4 text-primary"})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-medium",children:l.user}),t.jsx("span",{className:"text-xs text-muted-foreground",children:l.date})]}),t.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:l.text})]})]},e)}function xt(l,e){return t.jsxs("a",{href:l.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 rounded-lg border p-3 transition-colors hover:bg-muted",children:[t.jsx(at,{className:"h-4 w-4 text-muted-foreground"}),t.jsx("span",{className:"flex-1",children:l.name}),t.jsx(st,{className:"h-4 w-4 text-muted-foreground"})]},e)}function ht(l){return t.jsxs("span",{className:"inline-flex items-center gap-1 rounded-full bg-blue-100 px-3 py-1 text-sm text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[t.jsx(tt,{className:"h-3 w-3"}),l]},l)}function pt(l,e){return t.jsx(dt,{item:l},e)}function jt(l){return l.done}export{At as default};
