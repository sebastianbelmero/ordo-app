import{e as u,r as n,j as e,i as x}from"./app-xIZYWCDp.js";import{B as d}from"./button-BXPk2AfM.js";import{C as h,a as p,b,c as j,d as k}from"./card-CWGF61OU.js";import{S as o}from"./send-D4hbeh4g.js";/* empty css            */import"./createLucideIcon-B3LiBfZd.js";function _({className:l}){const s=u().props.auth.user,[i,c]=n.useState(null),[t,r]=n.useState(!1),m=async()=>{try{r(!0);const a=await x.post("/settings/telegram/generate-code");c(a.data.code);const g=a.data.bot_url||`https://t.me/${a.data.bot_username}`;window.open(`${g}?start=${a.data.code}`,"_blank")}catch(a){console.error("Failed to generate Telegram code:",a),alert("Gagal membuat koneksi. Silakan coba lagi.")}finally{r(!1)}};return e.jsx("section",{className:l,children:e.jsxs(h,{children:[e.jsxs(p,{children:[e.jsx(b,{children:"Telegram Integration"}),e.jsx(j,{children:"Hubungkan akun Anda dengan Telegram untuk mengecek jadwal dan tugas secara instan via chat."})]}),e.jsx(k,{className:"space-y-4",children:s.telegram_chat_id?e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-green-50 text-green-700 rounded-lg border border-green-200",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:e.jsx(o,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Terhubung dengan Telegram"}),e.jsxs("p",{className:"text-sm opacity-90",children:["ID: ",s.telegram_chat_id]})]}),e.jsx(d,{variant:"outline",className:"ml-auto text-red-600 border-red-200 hover:bg-red-50",children:"Putuskan"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Klik tombol di bawah untuk membuka Telegram dan tekan tombol ",e.jsx("strong",{children:"START"})," pada bot kami."]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(d,{onClick:m,disabled:t,className:"bg-[#229ED9] hover:bg-[#1f8bc] text-white",children:[e.jsx(o,{className:"w-4 h-4 mr-2"}),t?"Menghubungkan...":"Hubungkan Telegram"]}),i&&e.jsx("span",{className:"text-xs text-muted-foreground animate-pulse",children:"Menunggu konfirmasi dari Telegram..."})]})]})})]})})}export{_ as default};
