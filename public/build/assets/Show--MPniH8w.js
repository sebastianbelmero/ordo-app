import{c as ue,j as t,L as Q,H as he}from"./app-xIZYWCDp.js";import{e as ce,a as pe,D as ge,b as de,f as je,c as Ne,d as be}from"./app-layout-DLajnjpJ.js";import{B as U}from"./button-BXPk2AfM.js";import{P as me}from"./plus-CZsHFr3L.js";import{A as _e}from"./arrow-left-DFC2_F2f.js";import{C as oe}from"./circle-check-DoUg2RGL.js";import{C as ye}from"./clock-C40rlsYF.js";import{C as ve}from"./graduation-cap-BPGM7Ll1.js";import{T as we}from"./tag-CwWKbnbs.js";import{E as ke}from"./ellipsis-DZmWO8KP.js";import{S as Ce}from"./square-pen-Bw0AdoCY.js";import{T as Se}from"./trash-2-GRwsDu23.js";/* empty css            */import"./createLucideIcon-B3LiBfZd.js";import"./app-logo-icon-BTFLlc0O.js";function De(r){return r?new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric"}):"-"}function Te(r){return new Date(r).toLocaleDateString("id-ID",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}function $e(r){return r?new Date(r)<new Date:!1}function Le(r){if(!r)return null;try{return JSON.parse(r)}catch{return null}}function Me(r){const e=ue.c(43),{task:s}=r;let b;if(e[0]!==s.description||e[1]!==s.due_date||e[2]!==s.id||e[3]!==s.meta||e[4]!==s.priority||e[5]!==s.status||e[6]!==s.title){const m=Le(s.meta);let _;e[8]!==s.due_date||e[9]!==s.status?.is_completed?(_=!s.status?.is_completed&&$e(s.due_date),e[8]=s.due_date,e[9]=s.status?.is_completed,e[10]=_):_=e[10];const v=_;let u;e[11]!==s.status?.color||e[12]!==s.status?.is_completed?(u=s.status?.is_completed?t.jsx(oe,{className:"mt-0.5 h-5 w-5 text-green-500"}):t.jsx("div",{className:"mt-0.5 h-5 w-5 rounded-full border-2",style:{borderColor:s.status?.color??"#64748b"}}),e[11]=s.status?.color,e[12]=s.status?.is_completed,e[13]=u):u=e[13];const w=`font-medium ${s.status?.is_completed?"line-through text-muted-foreground":""}`;let f;e[14]!==w||e[15]!==s.title?(f=t.jsx("h4",{className:w,children:s.title}),e[14]=w,e[15]=s.title,e[16]=f):f=e[16];let l;e[17]!==s.description?(l=s.description&&t.jsx("p",{className:"mt-1 text-sm text-muted-foreground line-clamp-2",children:s.description}),e[17]=s.description,e[18]=l):l=e[18];let x;e[19]!==f||e[20]!==l?(x=t.jsxs("div",{children:[f,l]}),e[19]=f,e[20]=l,e[21]=x):x=e[21];let a;e[22]!==u||e[23]!==x?(a=t.jsxs("div",{className:"flex items-start gap-3",children:[u,x]}),e[22]=u,e[23]=x,e[24]=a):a=e[24];let y;e[25]===Symbol.for("react.memo_cache_sentinel")?(y=t.jsx(ge,{asChild:!0,children:t.jsx(U,{variant:"ghost",size:"icon",className:"h-8 w-8 opacity-0 group-hover:opacity-100",children:t.jsx(ke,{className:"h-4 w-4"})})}),e[25]=y):y=e[25];const N=`/opus/tasks/${s.id}/edit`;let h;e[26]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Ce,{className:"mr-2 h-4 w-4"}),e[26]=h):h=e[26];let i;e[27]!==N?(i=t.jsx(de,{asChild:!0,children:t.jsxs(Q,{href:N,children:[h,"Edit"]})}),e[27]=N,e[28]=i):i=e[28];let n;e[29]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(je,{}),e[29]=n):n=e[29];let c;e[30]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsxs(de,{className:"text-destructive",children:[t.jsx(Se,{className:"mr-2 h-4 w-4"}),"Delete"]}),e[30]=c):c=e[30];let o;e[31]!==i?(o=t.jsxs(Ne,{children:[y,t.jsxs(be,{align:"end",children:[i,n,c]})]}),e[31]=i,e[32]=o):o=e[32];let d;e[33]!==o||e[34]!==a?(d=t.jsxs("div",{className:"flex items-start justify-between",children:[a,o]}),e[33]=o,e[34]=a,e[35]=d):d=e[35];let p;e[36]!==s.status?(p=s.status&&t.jsx("span",{className:"inline-flex items-center rounded-full px-2 py-0.5 text-xs text-white",style:{backgroundColor:s.status.color},children:s.status.name}),e[36]=s.status,e[37]=p):p=e[37];let g;e[38]!==s.priority?(g=s.priority&&t.jsx("span",{className:"inline-flex items-center rounded px-2 py-0.5 text-xs",style:{backgroundColor:`${s.priority.color}20`,color:s.priority.color},children:s.priority.name}),e[38]=s.priority,e[39]=g):g=e[39];let j;e[40]!==v||e[41]!==s.due_date?(j=s.due_date&&t.jsxs("span",{className:`inline-flex items-center gap-1 rounded px-2 py-0.5 text-xs ${v?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-muted text-muted-foreground"}`,children:[t.jsx(ve,{className:"h-3 w-3"}),De(s.due_date)]}),e[40]=v,e[41]=s.due_date,e[42]=j):j=e[42],b=t.jsxs("div",{className:"group rounded-lg border bg-card p-4 transition-all hover:border-primary/50 hover:shadow-sm",children:[d,t.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2",children:[p,g,j,m?.tags?.map(Be)]}),m?.checklist&&m.checklist.length>0&&t.jsxs("div",{className:"mt-3 rounded bg-muted/50 p-2",children:[t.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[t.jsx(oe,{className:"h-3 w-3"}),m.checklist.filter(Ee).length,"/",m.checklist.length," items"]}),t.jsx("div",{className:"mt-1 h-1 rounded-full bg-muted",children:t.jsx("div",{className:"h-full rounded-full bg-green-500",style:{width:`${m.checklist.filter(Pe).length/m.checklist.length*100}%`}})})]})]}),e[0]=s.description,e[1]=s.due_date,e[2]=s.id,e[3]=s.meta,e[4]=s.priority,e[5]=s.status,e[6]=s.title,e[7]=b}else b=e[7];return b}function Pe(r){return r.done}function Ee(r){return r.done}function Be(r){return t.jsxs("span",{className:"inline-flex items-center gap-1 rounded bg-blue-100 px-2 py-0.5 text-xs text-blue-700 dark:bg-blue-900/30 dark:text-blue-400",children:[t.jsx(we,{className:"h-3 w-3"}),r]},r)}function et(r){const e=ue.c(107),{project:s,statusConfig:b}=r;let m,_;e[0]===Symbol.for("react.memo_cache_sentinel")?(m={title:"Opus",href:"/opus/workspaces"},_={title:"Projects",href:"/opus/workspaces"},e[0]=m,e[1]=_):(m=e[0],_=e[1]);const v=`/opus/projects/${s.id}`;let u;e[2]!==s.name||e[3]!==v?(u=[m,_,{title:s.name,href:v}],e[2]=s.name,e[3]=v,e[4]=u):u=e[4];const w=u;let f;e[5]!==s.tasks?(f=s.tasks??[],e[5]=s.tasks,e[6]=f):f=e[6];const l=f;let x;e[7]!==l?(x=l.filter(Ae),e[7]=l,e[8]=x):x=e[8];const a=x.length;let y;e[9]!==a||e[10]!==l.length?(y=l.length>0?Math.round(a/l.length*100):0,e[9]=a,e[10]=l.length,e[11]=y):y=e[11];const N=y;let h,i,n,c,o,d,p,g;if(e[12]!==w||e[13]!==a||e[14]!==N||e[15]!==s.created_at||e[16]!==s.id||e[17]!==s.name||e[18]!==s.status||e[19]!==b.task_statuses||e[20]!==l){let W;e[29]!==l?(W=(k,G)=>(k[G.id]=l.filter(xe=>xe.status_id===G.id),k),e[29]=l,e[30]=W):W=e[30];const fe=b.task_statuses.reduce(W,{});h=pe,o=w;const re=`${s.name} - Opus`;e[31]!==re?(d=t.jsx(he,{title:re}),e[31]=re,e[32]=d):d=e[32],i="flex h-full flex-1 flex-col gap-6 overflow-x-auto p-4";let X;e[33]===Symbol.for("react.memo_cache_sentinel")?(X=t.jsx(Q,{href:"/opus/workspaces",children:t.jsx(U,{variant:"ghost",size:"icon",children:t.jsx(_e,{className:"h-5 w-5"})})}),e[33]=X):X=e[33];let D;e[34]!==s.name?(D=t.jsx("h1",{className:"text-2xl font-bold",children:s.name}),e[34]=s.name,e[35]=D):D=e[35];let T;e[36]!==s.status?(T=s.status&&t.jsx("span",{className:"rounded-full px-3 py-1 text-sm text-white",style:{backgroundColor:s.status.color},children:s.status.name}),e[36]=s.status,e[37]=T):T=e[37];let $;e[38]!==D||e[39]!==T?($=t.jsxs("div",{className:"flex items-center gap-3",children:[D,T]}),e[38]=D,e[39]=T,e[40]=$):$=e[40];let L;e[41]!==s.created_at?(L=Te(s.created_at),e[41]=s.created_at,e[42]=L):L=e[42];let M;e[43]!==L?(M=t.jsxs("p",{className:"mt-1 text-sm text-muted-foreground",children:["Created ",L]}),e[43]=L,e[44]=M):M=e[44];let P;e[45]!==$||e[46]!==M?(P=t.jsxs("div",{className:"flex items-center gap-4",children:[X,t.jsxs("div",{children:[$,M]})]}),e[45]=$,e[46]=M,e[47]=P):P=e[47];const ae=`/opus/projects/${s.id}/board`;let Y;e[48]===Symbol.for("react.memo_cache_sentinel")?(Y=t.jsxs(U,{variant:"outline",children:[t.jsx(ce,{className:"mr-2 h-4 w-4"}),"Kanban Board"]}),e[48]=Y):Y=e[48];let E;e[49]!==ae?(E=t.jsx(Q,{href:ae,children:Y}),e[49]=ae,e[50]=E):E=e[50];const ie=`/opus/projects/${s.id}/tasks/create`;let Z;e[51]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(me,{className:"mr-2 h-4 w-4"}),e[51]=Z):Z=e[51];let B;e[52]!==ie?(B=t.jsx(U,{asChild:!0,children:t.jsxs(Q,{href:ie,children:[Z,"New Task"]})}),e[52]=ie,e[53]=B):B=e[53];let I;e[54]!==E||e[55]!==B?(I=t.jsxs("div",{className:"flex gap-2",children:[E,B]}),e[54]=E,e[55]=B,e[56]=I):I=e[56],e[57]!==P||e[58]!==I?(n=t.jsxs("div",{className:"flex items-center justify-between",children:[P,I]}),e[57]=P,e[58]=I,e[59]=n):n=e[59];let ee;e[60]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(ce,{className:"h-4 w-4"}),"Total Tasks"]}),e[60]=ee):ee=e[60];let O;e[61]!==l.length?(O=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[ee,t.jsx("p",{className:"mt-1 text-2xl font-bold",children:l.length})]}),e[61]=l.length,e[62]=O):O=e[62];let te;e[63]===Symbol.for("react.memo_cache_sentinel")?(te=t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(oe,{className:"h-4 w-4 text-green-500"}),"Completed"]}),e[63]=te):te=e[63];let A;e[64]!==a?(A=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[te,t.jsx("p",{className:"mt-1 text-2xl font-bold",children:a})]}),e[64]=a,e[65]=A):A=e[65];let se;e[66]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[t.jsx(ye,{className:"h-4 w-4 text-amber-500"}),"In Progress"]}),e[66]=se):se=e[66];let z;e[67]!==l?(z=l.filter(Oe),e[67]=l,e[68]=z):z=e[68];let H;e[69]!==z.length?(H=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[se,t.jsx("p",{className:"mt-1 text-2xl font-bold",children:z.length})]}),e[69]=z.length,e[70]=H):H=e[70];let le;e[71]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:"Progress"}),e[71]=le):le=e[71];let R;e[72]!==a||e[73]!==l.length?(R=t.jsxs("span",{className:"text-muted-foreground",children:[a,"/",l.length]}),e[72]=a,e[73]=l.length,e[74]=R):R=e[74];let q;e[75]!==N?(q=t.jsxs("span",{className:"font-medium",children:[N,"%"]}),e[75]=N,e[76]=q):q=e[76];let J;e[77]!==R||e[78]!==q?(J=t.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[R,q]}),e[77]=R,e[78]=q,e[79]=J):J=e[79];const ne=`${N}%`;let K;e[80]!==ne?(K=t.jsx("div",{className:"h-2 rounded-full bg-muted",children:t.jsx("div",{className:"h-full rounded-full bg-green-500",style:{width:ne}})}),e[80]=ne,e[81]=K):K=e[81];let F;e[82]!==J||e[83]!==K?(F=t.jsxs("div",{className:"rounded-lg border bg-card p-4",children:[le,t.jsxs("div",{className:"mt-2",children:[J,K]})]}),e[82]=J,e[83]=K,e[84]=F):F=e[84],e[85]!==O||e[86]!==A||e[87]!==H||e[88]!==F?(c=t.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[O,A,H,F]}),e[85]=O,e[86]=A,e[87]=H,e[88]=F,e[89]=c):c=e[89],p="space-y-6",g=b.task_statuses.map(k=>{const G=fe[k.id]??[];return G.length===0?null:t.jsxs("div",{children:[t.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[t.jsx("div",{className:"h-3 w-3 rounded-full",style:{backgroundColor:k.color}}),t.jsx("h3",{className:"font-semibold",children:k.name}),t.jsxs("span",{className:"text-sm text-muted-foreground",children:["(",G.length,")"]})]}),t.jsx("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:G.map(Ie)})]},k.id)}),e[12]=w,e[13]=a,e[14]=N,e[15]=s.created_at,e[16]=s.id,e[17]=s.name,e[18]=s.status,e[19]=b.task_statuses,e[20]=l,e[21]=h,e[22]=i,e[23]=n,e[24]=c,e[25]=o,e[26]=d,e[27]=p,e[28]=g}else h=e[21],i=e[22],n=e[23],c=e[24],o=e[25],d=e[26],p=e[27],g=e[28];let j;e[90]!==p||e[91]!==g?(j=t.jsx("div",{className:p,children:g}),e[90]=p,e[91]=g,e[92]=j):j=e[92];let C;e[93]!==s.id||e[94]!==l.length?(C=l.length===0&&t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-center rounded-xl border border-dashed py-16",children:[t.jsx(ce,{className:"h-12 w-12 text-muted-foreground/50"}),t.jsx("h3",{className:"mt-4 text-lg font-medium",children:"No tasks yet"}),t.jsx("p",{className:"mt-2 text-sm text-muted-foreground",children:"Create your first task for this project."}),t.jsx(U,{className:"mt-4",asChild:!0,children:t.jsxs(Q,{href:`/opus/projects/${s.id}/tasks/create`,children:[t.jsx(me,{className:"mr-2 h-4 w-4"}),"Create Task"]})})]}),e[93]=s.id,e[94]=l.length,e[95]=C):C=e[95];let S;e[96]!==i||e[97]!==n||e[98]!==c||e[99]!==j||e[100]!==C?(S=t.jsxs("div",{className:i,children:[n,c,j,C]}),e[96]=i,e[97]=n,e[98]=c,e[99]=j,e[100]=C,e[101]=S):S=e[101];let V;return e[102]!==h||e[103]!==o||e[104]!==d||e[105]!==S?(V=t.jsxs(h,{breadcrumbs:o,children:[d,S]}),e[102]=h,e[103]=o,e[104]=d,e[105]=S,e[106]=V):V=e[106],V}function Ie(r){return t.jsx(Me,{task:r},r.id)}function Oe(r){return r.status?.slug==="in_progress"}function Ae(r){return r.status?.is_completed}export{et as default};
